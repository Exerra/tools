---
import { faCloudMoon, faMoon, faSun, faToolbox } from "@fortawesome/free-solid-svg-icons";
import { faGithub, faMastodon, faXTwitter } from "@fortawesome/free-brands-svg-icons";
import FontawesomeIcon from "./FontawesomeIcon.astro";

import { site } from "../config/site";

console.log(FontawesomeIcon.toString())
---
<nav class="sticky top-0 z-40 w-full border-b border-b-slate-200 bg-white dark:border-b-slate-700 dark:bg-slate-900">
	<div class="container flex h-16 items-center px-6 sm:justify-between sm:space-x-0 mx-auto">
		<div class="flex gap-6 md:gap-10">
			<a class="items-center space-x-2 flex" href="/">
				<FontawesomeIcon icon={faToolbox} class="h-5 w-5" />
				<span class="inline-block font-bold">{site.name}</span>
			</a>
			<!--<div class="gap-6 flex">-->
			<!--	<a class="flex items-center text-lg font-semibold text-slate-600 hover:text-slate-900 sm:text-sm" href="/">Home</a>-->
			<!--</div>-->
		</div>

		<div class="flex flex-1 items-center justify-end space-x-4">
			<div class="flex items-center space-x-1">
				<a target="_blank" rel="noreferrer" href="https://github.com/Exerra/tools">
					<div class="active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800 bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent h-9 px-2 rounded-md text-slate-700 dark:text-slate-400">
						<FontawesomeIcon icon={faGithub} class="h-5 w-5" />
						<span class="sr-only">GitHub</span>
					</div>
				</a>
				<a target="_blank" rel="noreferrer" href="https://x.com/Exerra">
					<div class="active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800 bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent h-9 px-2 rounded-md text-slate-700 dark:text-slate-400">
						<FontawesomeIcon icon={faXTwitter} class="h-5 w-5" />
						<span class="sr-only">X/Twitter</span>
					</div>
				</a>
				<a target="_blank" rel="noreferrer" href="https://mastodon.world/@exerra">
					<div class="active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800 bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent h-9 px-2 rounded-md text-slate-700 dark:text-slate-400">
						<FontawesomeIcon icon={faMastodon} class="h-5 w-5" />
						<span class="sr-only">Mastodon</span>
					</div>
				</a>

				<button id="theme-switch">
					<div class="active:scale-95 inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800 bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent h-9 px-2 rounded-md text-slate-700 dark:text-slate-400">
						<FontawesomeIcon icon={faCloudMoon} class="transition-none" />
						<span class="sr-only">Theme switch</span>
					</div>
				</button>
			</div>
		</div>
	</div>
</nav>

<script is:inline>
	const themeSwitch = document.querySelector(
		"#theme-switch"
	)

	const icons = {
		moon: "<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"cloud-moon\" class=\"svg-inline--fa h-5 w-6 fa-cloud-moon\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path fill=\"currentColor\" d=\"M495.8 0c5.5 0 10.9 .2 16.3 .7c7 .6 12.8 5.7 14.3 12.5s-1.6 13.9-7.7 17.3c-44.4 25.2-74.4 73-74.4 127.8c0 81 65.5 146.6 146.2 146.6c8.6 0 17-.7 25.1-2.1c6.9-1.2 13.8 2.2 17 8.5s1.9 13.8-3.1 18.7c-34.5 33.6-81.7 54.4-133.6 54.4c-9.3 0-18.4-.7-27.4-1.9c-11.2-22.6-29.8-40.9-52.6-51.7c-2.7-58.5-50.3-105.3-109.2-106.7c-1.7-10.4-2.6-21-2.6-31.8C304 86.1 389.8 0 495.8 0zM447.9 431.9c0 44.2-35.8 80-80 80H96c-53 0-96-43-96-96c0-47.6 34.6-87 80-94.6l0-1.3c0-53 43-96 96-96c34.9 0 65.4 18.6 82.2 46.4c13-9.1 28.8-14.4 45.8-14.4c44.2 0 80 35.8 80 80c0 5.9-.6 11.7-1.9 17.2c37.4 6.7 65.8 39.4 65.8 78.7z\"/></svg>",
		sun: "<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"sun\" class=\"svg-inline--fa h-5 h-5 fa-sun\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z\"></path></svg>"
	}

	if (localStorage.theme === "dark" || (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
		document.documentElement.classList.add('dark');
		localStorage.theme = 'dark';
		themeSwitch.querySelector("svg").outerHTML = icons.moon
	} else {
		document.documentElement.classList.remove('dark');
		localStorage.theme = 'light';
		themeSwitch.querySelector("svg").outerHTML = icons.sun
	}

	console.log(themeSwitch.querySelector("svg"))

	themeSwitch.addEventListener("click", () => {
		if (localStorage.theme === "dark" || (!("theme" in localStorage) && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
			document.documentElement.classList.remove("dark")
			localStorage.theme = "light"
			themeSwitch.querySelector("svg").outerHTML = icons.sun
		} else {
			document.documentElement.classList.add('dark');
			localStorage.theme = 'dark';
			themeSwitch.querySelector("svg").outerHTML = icons.moon
		}
	})
</script>